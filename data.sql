-- ETF Stock Platform Initial Data
-- 전략과제 #1, #2, #3을 위한 초기 데이터

-- 사용자 데이터 삽입
INSERT INTO users (id, username, email, full_name, password_hash, status, created_at, updated_at) VALUES 
(1, 'admin', 'admin@etfstock.com', '관리자', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lE9lBOsl7iKTVEFDa', 'ACTIVE', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(2, 'user1', 'user1@example.com', '홍길동', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lE9lBOsl7iKTVEFDa', 'ACTIVE', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(3, 'user2', 'user2@example.com', '김철수', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lE9lBOsl7iKTVEFDa', 'ACTIVE', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(4, 'user3', 'user3@example.com', '이영희', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lE9lBOsl7iKTVEFDa', 'ACTIVE', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

-- ETF 정보 데이터 삽입 (대표적인 한국 ETF들)
INSERT INTO etf_info (id, base_date, srtn_cd, isin_cd, itms_nm, close_price, vs, flt_rt, nav, open_price, high_price, low_price, trade_volume, trade_price, market_total_amt, net_asset_total_amt, st_lstg_cnt, base_index_name, base_index_close_price, created_at, updated_at) VALUES 
(1, CURRENT_DATE, '069500', 'KR7069500003', 'KODEX 200', 45000.00, 500.00, 1.12, 44950.00, 44500.00, 45200.00, 44400.00, 1500000, 67500000000, 900000000000, 900000000000, 20000000, 'KOSPI200', 450.50, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(2, CURRENT_DATE, '233740', 'KR7233740000', 'KODEX 코스닥150', 12500.00, -150.00, -1.18, 12520.00, 12650.00, 12700.00, 12450.00, 800000, 10000000000, 250000000000, 250000000000, 20000000, 'KOSDAQ150', 125.20, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(3, CURRENT_DATE, '229200', 'KR7229200000', 'TIGER 코스피200', 44800.00, 300.00, 0.67, 44750.00, 44500.00, 45000.00, 44400.00, 1200000, 53760000000, 896000000000, 896000000000, 20000000, 'KOSPI200', 448.00, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(4, CURRENT_DATE, '233740', 'KR7233740000', 'TIGER 코스닥150', 12450.00, -200.00, -1.58, 12470.00, 12650.00, 12680.00, 12400.00, 600000, 7470000000, 249000000000, 249000000000, 20000000, 'KOSDAQ150', 124.50, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(5, CURRENT_DATE, '069660', 'KR7069660000', 'KODEX 반도체', 18500.00, 800.00, 4.52, 18420.00, 17700.00, 18600.00, 17650.00, 500000, 9250000000, 185000000000, 185000000000, 10000000, '반도체지수', 185.00, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(6, CURRENT_DATE, '233740', 'KR7233740000', 'KODEX 바이오', 9800.00, -200.00, -2.00, 9820.00, 10000.00, 10050.00, 9750.00, 300000, 2940000000, 98000000000, 98000000000, 10000000, '바이오지수', 98.00, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(7, CURRENT_DATE, '069660', 'KR7069660000', 'TIGER 배터리', 22000.00, 1200.00, 5.77, 21880.00, 20800.00, 22100.00, 20750.00, 400000, 8800000000, 220000000000, 220000000000, 10000000, '배터리지수', 220.00, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(8, CURRENT_DATE, '233740', 'KR7233740000', 'KODEX 자동차', 15800.00, 300.00, 1.94, 15770.00, 15500.00, 15850.00, 15450.00, 350000, 5530000000, 158000000000, 158000000000, 10000000, '자동차지수', 158.00, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(9, CURRENT_DATE, '069660', 'KR7069660000', 'TIGER 방산', 12500.00, 500.00, 4.17, 12450.00, 12000.00, 12550.00, 11950.00, 250000, 3125000000, 125000000000, 125000000000, 10000000, '방산지수', 125.00, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(10, CURRENT_DATE, '233740', 'KR7233740000', 'KODEX 게임', 11200.00, -300.00, -2.61, 11230.00, 11500.00, 11550.00, 11150.00, 200000, 2240000000, 112000000000, 112000000000, 10000000, '게임지수', 112.00, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

-- 관심종목 데이터 삽입
INSERT INTO user_watchlist (id, user_id, isin_cd, etf_name, short_code, is_active, created_at, updated_at, memo, notification_enabled) VALUES 
(1, 1, 'KR7069500003', 'KODEX 200', '069500', true, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, '대표적인 코스피200 ETF', true),
(2, 1, 'KR7233740000', 'KODEX 코스닥150', '233740', true, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, '코스닥 대표 ETF', true),
(3, 1, 'KR7069660000', 'KODEX 반도체', '069660', true, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, '반도체 테마 ETF', true),
(4, 2, 'KR7069500003', 'KODEX 200', '069500', true, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, '안정적인 투자', true),
(5, 2, 'KR7233740000', 'KODEX 코스닥150', '233740', true, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, '성장주 투자', true),
(6, 3, 'KR7069660000', 'KODEX 반도체', '069660', true, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, '테마 투자', true),
(7, 3, 'KR7229200000', 'TIGER 코스피200', '229200', true, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, '다른 브랜드 ETF', true),
(8, 4, 'KR7069500003', 'KODEX 200', '069500', true, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, '기본 투자', true);

-- 알림 조건 데이터 삽입
INSERT INTO alert_conditions (id, watchlist_id, user_id, condition_type, threshold_value, base_price, is_active, created_at, updated_at, description) VALUES 
(1, 1, 1, 'PERCENTAGE_DROP', 3.0, 45000.00, true, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, '3% 하락 시 알림'),
(2, 1, 1, 'PERCENTAGE_DROP', 5.0, 45000.00, true, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, '5% 하락 시 알림'),
(3, 2, 1, 'PERCENTAGE_RISE', 5.0, 12500.00, true, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, '5% 상승 시 알림'),
(4, 3, 1, 'PRICE_TARGET', 20000.00, 18500.00, true, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, '20,000원 도달 시 알림'),
(5, 4, 2, 'PERCENTAGE_DROP', 2.0, 45000.00, true, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, '2% 하락 시 알림'),
(6, 5, 2, 'PERCENTAGE_RISE', 3.0, 12500.00, true, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, '3% 상승 시 알림'),
(7, 6, 3, 'PERCENTAGE_DROP', 4.0, 18500.00, true, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, '4% 하락 시 알림'),
(8, 7, 3, 'PERCENTAGE_RISE', 6.0, 12500.00, true, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, '6% 상승 시 알림');

-- 알림 이력 데이터 삽입 (테스트용)
INSERT INTO alerts (id, alert_condition_id, watchlist_id, user_id, isin_cd, etf_name, alert_type, title, message, priority, trigger_price, base_price, change_percentage, change_amount, is_read, triggered_at, alert_status, created_at) VALUES 
(1, 1, 1, 1, 'KR7069500003', 'KODEX 200', 'PERCENTAGE_DROP', 'KODEX 200 3% 하락 알림', 'KODEX 200이 3% 하락했습니다. 현재가: 43,650원 (-3.0%)', 'MEDIUM', 43650.00, 45000.00, -3.00, -1350.00, false, CURRENT_TIMESTAMP - INTERVAL '2 hours', 'ACTIVE', CURRENT_TIMESTAMP),
(2, 3, 2, 1, 'KR7233740000', 'KODEX 코스닥150', 'PERCENTAGE_RISE', 'KODEX 코스닥150 5% 상승 알림', 'KODEX 코스닥150이 5% 상승했습니다. 현재가: 13,125원 (+5.0%)', 'HIGH', 13125.00, 12500.00, 5.00, 625.00, false, CURRENT_TIMESTAMP - INTERVAL '1 hour', 'ACTIVE', CURRENT_TIMESTAMP),
(3, 5, 4, 2, 'KR7069500003', 'KODEX 200', 'PERCENTAGE_DROP', 'KODEX 200 2% 하락 알림', 'KODEX 200이 2% 하락했습니다. 현재가: 44,100원 (-2.0%)', 'NORMAL', 44100.00, 45000.00, -2.00, -900.00, true, CURRENT_TIMESTAMP - INTERVAL '3 hours', 'ACTIVE', CURRENT_TIMESTAMP),
(4, 7, 6, 3, 'KR7069660000', 'KODEX 반도체', 'PERCENTAGE_DROP', 'KODEX 반도체 4% 하락 알림', 'KODEX 반도체가 4% 하락했습니다. 현재가: 17,760원 (-4.0%)', 'HIGH', 17760.00, 18500.00, -4.00, -740.00, false, CURRENT_TIMESTAMP - INTERVAL '30 minutes', 'ACTIVE', CURRENT_TIMESTAMP),
(5, 8, 7, 3, 'KR7229200000', 'TIGER 코스피200', 'PERCENTAGE_RISE', 'TIGER 코스피200 6% 상승 알림', 'TIGER 코스피200이 6% 상승했습니다. 현재가: 13,248원 (+6.0%)', 'HIGH', 13248.00, 12500.00, 6.00, 748.00, false, CURRENT_TIMESTAMP - INTERVAL '15 minutes', 'ACTIVE', CURRENT_TIMESTAMP);

-- 시퀀스 업데이트 (데이터 삽입 후)
SELECT setval('users_id_seq', (SELECT MAX(id) FROM users));
SELECT setval('etf_info_id_seq', (SELECT MAX(id) FROM etf_info));
SELECT setval('user_watchlist_id_seq', (SELECT MAX(id) FROM user_watchlist));
SELECT setval('alert_conditions_id_seq', (SELECT MAX(id) FROM alert_conditions));
SELECT setval('alerts_id_seq', (SELECT MAX(id) FROM alerts));
